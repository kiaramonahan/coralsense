(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[774],{7455:function(e,t,r){Promise.resolve().then(r.bind(r,9284))},257:function(e,t,r){"use strict";var n,o;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(o=r.g.process)?void 0:o.env)?r.g.process:r(4227)},4227:function(e){!function(){var t={229:function(e){var t,r,n,o=e.exports={};function i(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var l=[],c=!1,d=-1;function u(){c&&n&&(c=!1,n.length?l=n.concat(l):d=-1,l.length&&p())}function p(){if(!c){var e=a(u);c=!0;for(var t=l.length;t;){for(n=l,l=[];++d<t;)n&&n[d].run();d=-1,t=l.length}n=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function h(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new f(e,t)),1!==l.length||c||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=h,o.addListener=h,o.once=h,o.off=h,o.removeListener=h,o.removeAllListeners=h,o.emit=h,o.prependListener=h,o.prependOnceListener=h,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={exports:{}},s=!0;try{t[e](i,i.exports,n),s=!1}finally{s&&delete r[e]}return i.exports}n.ab="//";var o=n(229);e.exports=o}()},9284:function(e,t,r){"use strict";r.d(t,{default:function(){return d}});var n=r(7437),o=r(2265),i=r(2972),s=r.n(i),a=r(2520),l=r.n(a);r(4982),r(2219);var c=r(257);function d(){let e=(0,o.useRef)(null),[t,r]=(0,o.useState)("reef-layer"),i=(0,o.useRef)(null),[a,d]=(0,o.useState)(2019),[u,p]=(0,o.useState)(!1);(0,o.useEffect)(()=>{if(i.current)return;l().accessToken=c.env.NEXT_PUBLIC_MAPBOX_API_KEY;let t=new(l()).Map({container:e.current,style:"mapbox://styles/kikimaps/cm1vadaos007w01rdfsc80cdv",zoom:2,center:[200,20],bearingSnap:0,projection:"mercator",pitchWithRotate:!1,interactive:!0});t.scrollZoom.enable(),t.addControl(new(l()).NavigationControl({showCompass:!1}));let r=new(l()).Popup({closeButton:!1,closeOnClick:!1});return t.on("load",function(){t.addSource("reefs",{type:"geojson",data:"./reef_locations.geojson"}),t.addLayer({id:"reef-layer",type:"fill",source:"reefs",layout:{},paint:{"fill-color":"#00faff","fill-opacity":.6},visibility:"visible"}),t.addSource("dataset",{type:"geojson",data:"./cleaned_data.geojson"}),t.addLayer({id:"predictions-layer",type:"circle",source:"dataset",layout:{},paint:{"circle-color":["match",["get","hard_coral_class"],"Poor","#ff0000","Fair","#ffa500","Good","#00ff00","#cccccc"],"circle-opacity":.6},filter:["==",["number",["get","date_year"]],a],visibility:"none"}),t.on("mousemove","predictions-layer",e=>{let{country_name:n,ecoregion:o,hard_coral_class:i}=e.features[0].properties;r.setLngLat(e.lngLat).setHTML("<strong>Country/region:</strong> ".concat(n,"<br/>\n            <strong>Ecoregion:</strong> ").concat(o,"<br/>\n             <strong>Hard Coral Cover Prediction:</strong> ").concat(i)).addTo(t)}),t.on("mouseleave","predictions-layer",()=>{r.remove()}),i.current=t,f("reef-layer")}),()=>t.remove()},[]),(0,o.useEffect)(()=>{i.current&&i.current.getLayer("predictions-layer")&&"predictions-layer"===t&&i.current.setFilter("predictions-layer",["==",["number",["get","date_year"]],a])},[a,t]);let f=e=>{i.current&&(i.current.setLayoutProperty("reef-layer","visibility","none"),i.current.setLayoutProperty("predictions-layer","visibility","none"),i.current.setLayoutProperty(e,"visibility","visible")),t!==e&&r(e)};return(0,n.jsxs)("div",{style:{position:"relative",width:"100vw",height:"100vh"},children:[(0,n.jsxs)("div",{style:{position:"absolute",top:"10px",left:"10px",backgroundColor:"rgba(255, 255, 255, 0.8)",padding:"10px",borderRadius:"15px",zIndex:1,textAlign:"center"},children:[(0,n.jsxs)("div",{className:"logo-image",style:{display:"flex",alignItems:"center"},children:[(0,n.jsx)(s(),{legacyBehavior:!0,href:"/",children:(0,n.jsx)("img",{src:"logo_no_background.png",alt:"Logo",style:{maxWidth:"150px",height:"auto",marginBottom:"10px"}})}),(0,n.jsx)("button",{className:"question-icon",onClick:()=>p(!u),style:{position:"absolute",top:"15px",right:"15px"},children:"?"})]}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"10px"},children:[(0,n.jsx)("button",{id:"toggleReefLayerButton",onClick:()=>f("reef-layer"),className:"toggleButton ".concat("reef-layer"===t?"active":""),children:"Reef Distributions"}),(0,n.jsx)("button",{id:"togglePredictionsLayerButton",onClick:()=>f("predictions-layer"),className:"toggleButton ".concat("predictions-layer"===t?"active":""),children:"Reef Health Predictions"})]}),"predictions-layer"===t&&(0,n.jsxs)("div",{className:"session",id:"sliderbar",style:{marginTop:"15px"},children:[(0,n.jsxs)("h2",{children:["Year: ",(0,n.jsx)("label",{id:"active-year",children:a})]}),(0,n.jsx)("input",{id:"slider",className:"row",type:"range",min:"2017",max:"2022",step:"1",value:a,onChange:e=>{d(parseInt(e.target.value,10))}})]})]}),u&&(0,n.jsxs)("div",{className:"instructions-popup",children:[(0,n.jsx)("h3",{children:"Map Tips"}),(0,n.jsxs)("p",{children:["Use the toolbar to switch between ",(0,n.jsx)("b",{children:"Reef Distributions"})," and ",(0,n.jsx)("b",{children:"Reef Health Predictions"}),". Adjust the year using the slider to view predictions for different years. Hover over points for detailed information. Scroll to zoom in or out, and be sure to drag the map around to explore. A legend is available in the bottom left corner of the map. ",(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsx)("b",{children:"Reef Distributions"})," shows where reefs are around the globe.",(0,n.jsx)("br",{}),(0,n.jsx)("b",{children:"Reef Health Predictions"})," are predictions of hard coral cover from our models. You can read more about our prediction process on our main site."]}),(0,n.jsx)("button",{onClick:()=>p(!1),className:"close-button",children:"Close"})]}),(0,n.jsx)("div",{id:"legend",style:{position:"absolute",bottom:"30px",left:"10px",backgroundColor:"rgba(255, 255, 255, 0.8)",padding:"10px",borderRadius:"15px",zIndex:1},children:"reef-layer"===t?(0,n.jsxs)("div",{className:"legend-item",style:{display:"flex",alignItems:"center",marginBottom:"5px"},children:[(0,n.jsx)("div",{className:"legend-color",style:{width:"20px",height:"20px",backgroundColor:"#00faff",marginRight:"10px",borderRadius:"3px"}}),(0,n.jsx)("span",{children:"Reef"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"legend-item",style:{display:"flex",alignItems:"center",marginBottom:"5px"},children:[(0,n.jsx)("div",{className:"legend-color",style:{width:"20px",height:"20px",backgroundColor:"#00ff00",marginRight:"10px",borderRadius:"3px"}}),(0,n.jsx)("span",{children:"Good"})]}),(0,n.jsxs)("div",{className:"legend-item",style:{display:"flex",alignItems:"center",marginBottom:"5px"},children:[(0,n.jsx)("div",{className:"legend-color",style:{width:"20px",height:"20px",backgroundColor:"#ffa500",marginRight:"10px",borderRadius:"3px"}}),(0,n.jsx)("span",{children:"Fair"})]}),(0,n.jsxs)("div",{className:"legend-item",style:{display:"flex",alignItems:"center"},children:[(0,n.jsx)("div",{className:"legend-color",style:{width:"20px",height:"20px",backgroundColor:"#ff0000",marginRight:"10px",borderRadius:"3px"}}),(0,n.jsx)("span",{children:"Poor"})]})]})}),(0,n.jsx)("div",{ref:e,style:{width:"100%",height:"100%"}})]})}},4982:function(){},2219:function(){}},function(e){e.O(0,[876,415,972,971,117,744],function(){return e(e.s=7455)}),_N_E=e.O()}]);